{
  "hash": "41486686503661583972b03e56376bd9",
  "result": {
    "markdown": "---\ntitle: \"Layouts\"\n---\n\n\n## App Layout Options\n\nR Shiny apps come with several pre-built layouts stored as functions. As with labels and headers, **layouts are exlcusively controlled in the UI**. This makes choosing a layout a similar process to the labels and headers selection process so hopefully the examples below will feel familiar!\n\nAs before, we need to re-define our UI, server, and app.We will also need to make sure that both `shiny` and `htmltools` are loaded as our app now depends on both.\n\n:::callout-note\n#### \n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"librarian\")\nlibrarian::shelf(shiny, htmltools)\n```\n:::\n\n:::\n\nOnce we have the packages that we need, re-create the UI we wound up with at the end of the \"Labels and Headers\" chapter.\n\n:::callout-note\n####\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the UI\ndefault_ui <- fluidPage(\n  \n  # Add a top-level header\n  htmltools::h1(\"Square Root Calculator\"),\n  \n  # Add an app explanation as a small(ish) header\n  htmltools::h4(\n  htmltools::strong(\"Welcome!\"),\n  \"This app takes the square root of any number that you type into the box below (by using the R function \",\n  htmltools::code(\"sqrt\"), \").\" ),\n  \n  # Add two line breaks\n  htmltools::hr(),\n  htmltools::hr(),\n\n  # Now add a smaller header for the input\n  htmltools::h3(\"Enter a Number Below\"),\n  \n  # Create the radio buttons\n  numericInput(inputId = \"my_input\",\n               label = \"Type a number\",\n               value = 25),\n  \n  # Add a line break\n  htmltools::hr(),\n  \n  # Also include a smaller header for the output\n  htmltools::h3(\"See Answer Below\"),\n  \n  # And print the output\n  \"Square root is: \",\n  textOutput(outputId = \"my_output\")\n  \n  )\n```\n:::\n\n:::\n\nBuild the server again.\n\n:::callout-note\n####\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the server\nlayout_server <- function(input, output){\n  \n  # Let's take the numeric input and take the square root\n  output$my_output <- renderText( sqrt(input$my_input) )\n  \n}\n```\n:::\n\n:::\n\nFinally, create the app!\n\n:::callout-note\n#### \n\n::: {.cell}\n\n```{.r .cell-code}\nshinyApp(ui = default_ui, server = layout_server)\n```\n\n::: {.cell-output-display}\n![](layouts_files/figure-html/basic-layout-app-1.png){width=672}\n:::\n:::\n\n:::\n\nThe layout we have used so far is the default for Shiny: a single fluid page where all content is stacked vertically (that's what the `fluidPage` function in the first line of the UI defaults to). However, if desired, we can invoke one of `shiny`'s built-in functions for specifying different app layouts. Let's experiment with (1) an app that has a sidebar versus a main panel and (2) an app where content is divided into tabs.\n\n## Layout - Sidebar\n\nA classic template for apps is to have a vertical sidebar (usually ~20-25% the width of the screen) and a main panel (the remaining width of the screen). This is a great layout if you want to include several user inputs in the sidebar and a single output that is modified by most or all of these inputs.\n\nThis is often used when a plot is generated in the main panel and the user can tweak several aspects of that plot in the sidebar. Let's create a new UI using this layout to showcase this.\n\nWe need to use two new `shiny` functions to tell our app which UI content should be in the sidebar and which should be in the main panel: `sidebarPanel` and `mainPanel`.\n\n:::callout-note\n####\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the UI\nsidebar_ui <- fluidPage(\n  \n  # Add a top-level header\n  htmltools::h1(\"Square Root Calculator\"),\n  \n  # Add an app explanation as a small(ish) header\n  htmltools::h4(\n  htmltools::strong(\"Welcome!\"),\n  \"This app takes the square root of any number that you type into the box below (by using the R function \",\n  htmltools::code(\"sqrt\"), \").\" ),\n  \n  # Add two line breaks\n  htmltools::hr(),\n  htmltools::hr(),\n\n  # Let's start the sidebar here\n  sidebarPanel(\n  \n  # Now add a smaller header for the input\n  htmltools::h3(\"Enter a Number Below\"),\n  \n  # Create the radio buttons\n  numericInput(inputId = \"my_input\",\n               label = \"Type a number\",\n               value = 25),\n  \n  # Add a line break\n  htmltools::hr(),\n  \n  # And end the sidebar here\n  ),\n  \n  # Now start the main panel\n  mainPanel(\n  \n  # Also include a smaller header for the output\n  htmltools::h3(\"See Answer Below\"),\n  \n  # And print the output\n  \"Square root is: \",\n  textOutput(outputId = \"my_output\")\n  \n  # And end the main panel here\n  )\n  \n  # Then close the whole `fluidPage` parentheses\n  )\n```\n:::\n\n:::\n\nNote that all UI elements within the `sidebarPanel(...)` parentheses will be in the sidebar and all elements in the `mainPanel(...)` parentheses will be in the main panel. By leaving our main header and explanation outside of both we guarantee that they can use the whole width of the screen and will be above the division between sidebar and main panel.\n\nNow that the UI has been defined, we can use the same server function and create our app with a new user interface.\n\n:::callout-note\n#### \n\n::: {.cell}\n\n```{.r .cell-code}\nshinyApp(ui = sidebar_ui, server = layout_server)\n```\n\n::: {.cell-output-display}\n![](layouts_files/figure-html/sidebar-app-1.png){width=672}\n:::\n:::\n\n:::\n\nIf you run the above code on your computer you should see the sidebar to the left and the main panel to the right. They are stacked vertically when embedded in this web page because they sense the width of the screen is insufficient for side-by-side display.\n\n## Layout - Tabs\n\nAnother viable layout is to place content in separate tabs that a user can navigate between. This is similar to the navbar of this website as all tab labels will be visible but only the content of the selected tab will be displayed.\n\nNote that because this is a layout change, the server function is still capable of using inputs from one or more tabs and creating outputs in other tabs entirely if desired. In our experience, multiple tabs are more frequently used to display separate datasets that are under a common umbrella (e.g., the data from several experiments conducted at the same site, etc.).\n\nIn order to use the tabs layout we need two new `shiny` functions: `tabsetPanel` and one use of `tabPanel` per tab you'd like in your app. See below for an example\n\n:::callout-note\n####\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the UI\ntab_ui <- fluidPage(\n  \n  # Add a top-level header\n  htmltools::h1(\"Square Root Calculator\"),\n  \n  # Let's start the tabs here\n  tabsetPanel(\n  \n  # Now we need to tell the app where each tab starts and stops\n  tabPanel(title = \"Welcome\",\n  \n  # Add an app explanation as a small(ish) header\n  htmltools::h4(\n  htmltools::strong(\"Welcome!\"),\n  \"This app takes the square root of any number that you type into the box below (by using the R function \",\n  htmltools::code(\"sqrt\"), \").\" ),\n  \n  # Add two line breaks\n  htmltools::hr(),\n  htmltools::hr(),\n  \n  # Close this tabPanel and start the next\n  ), tabPanel(title = \"Starting Number\",\n\n  # Now add a smaller header for the input\n  htmltools::h3(\"Enter a Number Below\"),\n  \n  # Create the radio buttons\n  numericInput(inputId = \"my_input\",\n               label = \"Type a number\",\n               value = 25),\n  \n  # Add a line break\n  htmltools::hr(),\n  \n  # Close this tabPanel and start the next\n  ), tabPanel(title = \"Square Root\",\n  \n  # Also include a smaller header for the output\n  htmltools::h3(\"See Answer Below\"),\n  \n  # And print the output\n  \"Square root is: \",\n  textOutput(outputId = \"my_output\")\n  \n  # Close the current tab panel\n  )\n  \n  # Now close the `tabsetPanel(...` parentheses\n  )\n  \n  # Then close the whole `fluidPage` parentheses\n  )\n```\n:::\n\n:::\n\nNote that the `title` argument defined in each `tabPanel` call becomes the words on the tab.\n\nOnce the layout has been defined in the UI, we can create another app using the tab layout but with the same server function as the other two apps.\n\n:::callout-note\n#### \n\n::: {.cell}\n\n```{.r .cell-code}\nshinyApp(ui = tab_ui, server = layout_server)\n```\n\n::: {.cell-output-display}\n![](layouts_files/figure-html/tab-app-1.png){width=672}\n:::\n:::\n\n:::\n\nAn advantage of using `tabPanel`s is that you can have essentially as many tabs as you desire. This allows for an app with a huge amount of data that users can still easily navigate.\n",
    "supporting": [
      "layouts_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}